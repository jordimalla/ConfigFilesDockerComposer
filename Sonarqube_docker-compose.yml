#Use root/example as user/password credentials
version: '3.1'

volumes:
  sonarqube-conf:
  
  sonarqube-data:
  
  sonarqube-logs:
  
  sonarqube-extensions:
  
  pgdata:
  
services:
  db:
    image: sonar-postgres
    restart: always
    environment:
      POSTGRES_DB: sonar
      POSTGRES_PASSWORD: sonar
      POSTGRES_USER: sonar
      PGDATA: /var/lib/postgresql/data/pgdata
    volumes:
      - pgdata:/var/lib/postgresql/data/pgdata
  
  adminer:
    image: adminer
    restart: always
    ports:
      - 8080:8080
  
  sonarqube:
    image: sonarqube
    ports: 9000:9000
    restart: always
    environment:
      sonar.jdbc.username=sonar
      sonar.jdbc.password=sonar
      sonar.jdbc.url=jdbc:postgresql://sonar-postgres/sonar
    volumes:
      sonarqube-conf:/opt/sonarqube/conf
      sonarqube-data:/opt/sonarqube/data
      sonarqube-logs:/opt/sonarqube/logs
      sonarqube-extensions:/opt/sonarqube/extensions
    links:
      - sonar-postgres
    
  
